###############################################################################
# virtual_machines.yaml — VM Definitions for cluster-01
#
# Define all VMs for this specific cluster environment.
# See Config/virtual_machines.yaml for full examples of all parameters.
###############################################################################

virtual_machines:

  # New VM — will be created
  - name: "cluster01-app-01"
    description: "Application server on cluster-01"
    cluster:
      ext_id: "REPLACE-WITH-CLUSTER-01-UUID"
    num_sockets: 2
    num_cores_per_socket: 2
    memory_size_bytes: 8589934592  # 8 GiB
    power_state: "ON"
    machine_type: "PC"
    boot_config:
      legacy_boot:
        boot_order:
          - "DISK"
          - "CDROM"
          - "NETWORK"
    disks:
      - disk_address:
          bus_type: "SCSI"
          index: 0
        backing_info:
          vm_disk:
            disk_size_bytes: 53687091200  # 50 GiB
            storage_container:
              ext_id: "REPLACE-WITH-CONTAINER-UUID"
            data_source:
              reference:
                image_reference:
                  image_ext_id: "REPLACE-WITH-IMAGE-UUID"
    nics:
      - backing_info:
          model: "VIRTIO"
          is_connected: true
        network_info:
          nic_type: "NORMAL_NIC"
          subnet:
            ext_id: "REPLACE-WITH-SUBNET-UUID"
          ipv4_config:
            should_assign_ip: true

  # Existing VM — will be imported on first apply
  - name: "cluster01-legacy-db"
    description: "Legacy database - imported into Terraform"
    import_uuid: "REPLACE-WITH-EXISTING-VM-UUID"
    cluster:
      ext_id: "REPLACE-WITH-CLUSTER-01-UUID"
    num_sockets: 4
    num_cores_per_socket: 2
    memory_size_bytes: 17179869184  # 16 GiB
    power_state: "ON"
    machine_type: "PC"
    boot_config:
      legacy_boot:
        boot_order:
          - "DISK"
          - "NETWORK"
    disks:
      - disk_address:
          bus_type: "SCSI"
          index: 0
        backing_info:
          vm_disk:
            disk_size_bytes: 107374182400
            storage_container:
              ext_id: "REPLACE-WITH-CONTAINER-UUID"
    nics:
      - backing_info:
          model: "VIRTIO"
          is_connected: true
        network_info:
          nic_type: "NORMAL_NIC"
          subnet:
            ext_id: "REPLACE-WITH-SUBNET-UUID"
          ipv4_config:
            should_assign_ip: false
            ip_address:
              value: "10.0.100.50"
